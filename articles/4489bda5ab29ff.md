---
title: "MkDocsã®ã™ã‚ã‚"
emoji: "ğŸ“–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [markdown, mkdocs, docker]
published: true
---

# ã¯ã˜ã‚ã«

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ•´ç†ã™ã‚‹ã¨ãã€MkDocs ã‚’ä½¿ã£ã¦ã¿ãŸã®ã§ã€ãã®è¨˜éŒ²ã€‚ä¸‹è¨˜ 4 ç‚¹ã‚’æ•´ç†ã—ãŸã€‚

1. Python ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã›ãšã« Docker ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèªã™ã‚‹
2. Docker ã‚’ä½¿ã£ã¦ HTML ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹
3. é•·ããªã‚ŠãŒã¡ãª docker ã‚³ãƒãƒ³ãƒ‰ã‚’ Makefile ã«ã—ã¦ãŠã
4. GitHub Actions ã§ GitHub Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹

ä½•ç•ªç…ã˜ã‹ã‚ã‹ã‚‰ãªã„ã®ã§ã€è©³ã—ãã¯å‚è€ƒã«ã—ãŸã‚µã‚¤ãƒˆå‚ç…§ï¼ˆä¸€ç•ªä¸‹ã«ã¾ã¨ã‚ãŸï¼‰ã€‚

æœ€çµ‚çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µã‚¤ãƒˆã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã„ã„æ„Ÿã˜ã€‚

![](/images/4489bda5ab29ff/index.png)

ã‚³ãƒ¼ãƒ‰ã¯[optimisuke/hello-mkdocs](https://github.com/optimisuke/hello-mkdocs)ã«ãŠã„ãŸã€‚

å…ˆã«æ›¸ã„ã¦ãŠãã¨ã€ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã¯ã“ã‚“ãªæ„Ÿã˜ã€‚
![](/images/4489bda5ab29ff/files.png)

# MkDocs

ã¾ãšã¯ã€MkDocs ã®è¨­å®šï¼ˆyamlï¼‰ã®èª¬æ˜ã€‚
å¿…è¦æœ€ä½é™ã§ã€ã“ã‚“ãªæ„Ÿã˜ã€‚
`theme`ã«`material`ã‚’ã¤ã‘ã¦[Material for MkDocs](https://squidfunk.github.io/mkdocs-material/)ã‚’ä½¿ã£ã¦ã‚‹ã€‚
ã„ã„æ„Ÿã˜ã€‚
`index.md`ã¨`hoge.md`ãŒ`src`ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸‹ã«ã‚ã‚‹ã€‚

```yaml:mkdocs.yml
# contents
nav:
  - Home:
      - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: index.md
      - ã»ã’: hoge.md

# metadata
site_name: MkDocs Test Site
docs_dir: src
use_directory_urls: false

# theme
theme:
  name: material
  language: ja
```

ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã¯ãã‚Œãã‚Œã“ã‚“ãªæ„Ÿã˜ã€‚

```md:src/index.md
# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

æœ€åˆã®ãƒšãƒ¼ã‚¸
```

```md:src/hoge.md
# ãƒ›ã‚²

æ¬¡ã®ãƒšãƒ¼ã‚¸
```

ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèªã™ã‚‹ã¨ãã¯ã€ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒãƒ¼ãŒç«‹ã¡ä¸ŠãŒã‚‹ã€‚
ã“ã“ã§ã¯ã€ãƒãƒ¼ãƒˆã‚’`8004`ã«ã—ã¦ã„ã‚‹ã€‚
ãªã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰`localhost:8004`ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ç¢ºèªã§ãã‚‹ã€‚

```bash
docker run --rm -it -v $(pwd):/docs -p 8004:8000 squidfunk/mkdocs-material
```

Python ä½¿ã†ã¨ã€ã„ã‚ã‚“ãªã‚‚ã®ãŒ`pip install`ã•ã‚Œã¦ã”ã¡ã‚ƒã”ã¡ã‚ƒã—ã¡ã‚ƒã†ã®ã§ã€docker ä½¿ã£ãŸæ–¹ãŒè‰¯ã„ã¨æ€ã£ã¦ã‚‹ã€‚

# HTML Export

æ¬¡ã« HTML ã®å‡ºåŠ›ã€‚
ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ã€å‡ºåŠ›ã§ãã‚‹ã€‚
`site`ãƒ•ã‚©ãƒ«ãƒ€ã«åãå‡ºã•ã‚Œã‚‹ã€‚

```bash
docker run --rm -it -v $(pwd):/docs squidfunk/mkdocs-material build --clean
```

ä¸Šè¨˜ yaml ã«`use_directory_urls: false`ã‚’æ›¸ãã“ã¨ãŒãƒã‚¤ãƒ³ãƒˆã€‚
ãƒ­ãƒ¼ã‚«ãƒ«ã§ã€`index.html`ã‚’é–‹ã„ã¦ãƒšãƒ¼ã‚¸é·ç§»ã™ã‚‹å ´åˆã‚‚ã„ã„æ„Ÿã˜ã«é–‹ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
ã“ã‚Œã‚’æ›¸ã‹ãªã„ã¨ãƒ‘ã‚¹ãŒãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡ã™ã®ã§ã€html ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããšã«ä¸‹è¨˜ã®ã‚ˆã†ãªãƒšãƒ¼ã‚¸ãŒå‡ºã¦ãã‚‹ã€‚

![](/images/4489bda5ab29ff/directory.png)

# Docker x Makefile

docker ã‚³ãƒãƒ³ãƒ‰é•·ããªã‚ŠãŒã¡ãªã®ã§ã€Makefile ã‚’ä½œã£ã¦ãŠãã€‚ã‚‚ã†ã¡ã‚‡ã„ã‹ã£ã“ã„ã„ Makefile æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã€‚
ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦ã„ã‚‹`${PWD}`ã®éƒ¨åˆ†ãŒã€ã‚³ãƒãƒ³ãƒ‰ã§æ‰“ã¤æ™‚ã¨é•ã†ã€‚

```Makefile
view:
	docker run --rm -it -v ${PWD}:/docs -p 8004:8000 squidfunk/mkdocs-material
build:
	docker run --rm -it -v ${PWD}:/docs squidfunk/mkdocs-material build --clean
```

# GitHub Actions

GitHub Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‹ã£ãŸã®ã§ã€GitHub Actions ã‚’ä½¿ã£ã¦å®Ÿæ–½ã—ãŸã€‚
ä¸‹è¨˜å…¬å¼ï¼ˆ[Publishing your site - Material for MkDocs](https://squidfunk.github.io/mkdocs-material/publishing-your-site/)ï¼‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç­‰ã‚’å‚è€ƒã«ã—ãŸã€‚

`mkdocs gh-deploy --force`ã‚³ãƒãƒ³ãƒ‰ã®ä¸­ã§ãƒ–ãƒ©ãƒ³ãƒä½œã£ã¦ push ã™ã‚‹ã¨ã“ã‚ã¾ã§ã—ã¦ãã‚Œã¦ã‚‹ã‹ã‚‰ã€ã™ã”ãã‚·ãƒ³ãƒ—ãƒ«ã€‚

```yaml:.github.workflow/mkdocs.yml
name: deploy mkdocs
on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2
      - name: Configure git info
        run: |
          git config --global user.name "github-actions-for-deploy"
          git config --global user.email deploy-actions@github.com
      - name: Set up python
        uses: actions/setup-python@v2
        with:
          python-version: 3.x
      - run: pip install mkdocs-material
      - run: pip install plantuml-markdown python-markdown-math mdx_truly_sane_lists mkdocs-git-revision-date-localized-plugin mkdocs-add-number-plugin
      - name: deploy
        run: mkdocs gh-deploy --force
```

`main`ã« push ã™ã‚‹ã¨`gh-pages`ã¨ã„ã†ãƒ–ãƒ©ãƒ³ãƒãŒå‡ºæ¥ã‚‹ã€‚ã¾ã˜ã‚ã«ã€`git config`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’æŒ‡å®šã—ãŸã‹ã‚‰ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã§ã‚³ãƒŸãƒƒãƒˆã—ãŸã“ã¨ã«ãªã£ã¦ã‚‹ã€‚
![](/images/4489bda5ab29ff/github.png)

GitHub Pages ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã€ä¸‹è¨˜è¨­å®šã‚’ã™ã‚‹ã¨ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
![](/images/4489bda5ab29ff/pages.png)

# ãŠã‚ã‚Šã«

å°‘ã—ç’°å¢ƒæ•´ãˆãŸã‚‰ã€ã„ã„æ„Ÿã˜ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ã¨ã£ã¦ã‚‚ã„ã„æ„Ÿã˜ã€‚
ãƒãƒ¼ãƒ ã«ã¯ GitHub Pages ã§å…±æœ‰ã—ã¦ã€å¿…è¦ã«å¿œã˜ã¦éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¯ html ã§å…±æœ‰ã™ã‚‹ï¼ˆpdf ã«ã‚‚ã§ãã‚‹ã‚‰ã—ã„ï¼‰æ„Ÿã˜ã§é‹ç”¨ã§ããã†ã€‚
ã‚¹ã‚¿ã‚¤ãƒ«ã‚‚å¤‰ãˆã‚‰ã‚Œã‚‹ã¿ãŸã„ãªã®ã§ã€ã‚‚ã£ã¨ä½¿ã£ã¦ã„ããŸã„ã€‚

# å‚è€ƒ

## å…¬å¼

- [MkDocs](https://www.mkdocs.org/)
- [Material for MkDocs](https://squidfunk.github.io/mkdocs-material/)
- [squidfunk/mkdocs-material - Docker Image | Docker Hub](https://hub.docker.com/r/squidfunk/mkdocs-material)

## ãã®ä»–

- [Material for MkDocs ã§ç”Ÿæˆã—ãŸã‚µã‚¤ãƒˆã‚’ Github Pages ã§å…¬é–‹ã™ã‚‹](https://zenn.dev/y16ra/articles/6266a87b048bd2)
- [MkDocs ã§ä½œã£ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ GitHub Actions ã‚’ä½¿ã£ã¦ GitHub Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚ˆã† | ultra code](https://futureys.tokyo/lets-deploy-document-built-by-mkdocs-to-github-pages-by-using-github-actions/)
- [mkdocs+GitHub Actions ã§ Markdown ãƒ™ãƒ¼ã‚¹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆ/å…¬é–‹ã™ã‚‹ - taxin's notes](https://taxintt.hatenablog.com/entry/2020/06/07/225215)
- [GitHub Actions ã¨ Markdown ã§é™çš„ã‚µã‚¤ãƒˆä½œæˆ \~ mkdocs-material ç·¨\~ - ç²—å¤§ãƒ¡ãƒ¢ç½®ãå ´](https://ossyaritoori.hatenablog.com/entry/2021/02/28/GitHub_Actions%E3%81%A8Markdown%E3%81%A7%E9%9D%99%E7%9A%84%E3%82%B5%E3%82%A4%E3%83%88%E4%BD%9C%E6%88%90_~_mkdocs-material_%E7%B7%A8~)
- [MkDocs ã«ã‚ˆã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ](https://zenn.dev/mebiusbox/articles/81d977a72cee01)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹ç¯‰å‘ã‘é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã€MkDocsã€åŠã³ã€Material for MkDocsã€ã®å€‹äººçš„å°å…¥ï¼†è¨­å®šã¾ã¨ã‚ | DevelopersIO](https://dev.classmethod.jp/articles/mkdocs-and-material-for-mkdocs-tips-matome/#toc-7)
