---
title: "MongoDBã‚’ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§å‹•ã‹ã—ã¦ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ"
emoji: "ğŸƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [mongodb, typescript, jest]
published: true
---

# ã¯ã˜ã‚ã«

MongoDB ã¸ã®ã‚¯ã‚¨ãƒªéƒ¨åˆ†ã‚’ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã—ãŸã„ãªãƒ¼ã¨æ€ã£ã¦ã€ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§ MongoDB ã‚’å‹•ã‹ã—ã¦ãã‚Œã‚‹`Jest preset`ã®[shelfio/jest-mongodb](https://github.com/shelfio/jest-mongodb)ã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ[Using with MongoDB Â· Jest](https://jestjs.io/docs/mongodb)ï¼‰ãŒãã“ãã“ã‚ã‹ã‚‹äººå‘ã‘ãªæ„Ÿã˜ãªã®ã§ã€æœ¬å½“ã«å‹•ãã‚“ã‹ãªã¨æ€ã„ãªãŒã‚‰è©¦ã—ã¦è‹¦åŠ´ã—ã¾ã—ãŸã€‚
è©¦è¡ŒéŒ¯èª¤ã—ãªãŒã‚‰å‹•ã‹ã—ãŸçµæœã‚’è¨˜è¼‰ã—ã¾ã™ã€‚
Node.js x MongoDB ä½¿ã£ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™ºã—ã¦ã¦ã€DB ã¸ã®ã‚¯ã‚¨ãƒªéƒ¨åˆ†ã‚‚ã—ã£ã‹ã‚Šãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã—ãŸã„äººã®å½¹ã«ç«‹ã¦ãŸã‚‰è‰¯ã„ã‹ãªã¨æ€ã„ã¾ã™ã€‚

:::message
preset ã¯ Jest ã®è¨­å®šã®ãƒ™ãƒ¼ã‚¹ã‚‰ã—ã„ã§ã™ã€‚æ·±ãç†è§£ã™ã‚‹ãŸã‚ã«ã¯ã€Jest ã‚’ã‚‚ã£ã¨çŸ¥ã‚‹å¿…è¦ã‚ã‚Šãã†ã§ã™ã€‚

> A preset that is used as a base for Jest's configuration.

[Jest ã®è¨­å®š Â· Jest](https://jestjs.io/ja/docs/configuration)
:::

ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’ç½®ã„ã¦ã¾ã™ã€‚
[optimisuke/hello-jest-mongodb: MongoDB ã‚’ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§ãƒ†ã‚¹ãƒˆ](https://github.com/optimisuke/hello-jest-mongodb)

# ç’°å¢ƒæ§‹ç¯‰

## Docker

MongoDB ã‚’ Docker ã§å‹•ã‹ã™ãŸã‚`docker-compose.yml`ã‚’æº–å‚™ã—ã¦ãŠãã¾ã™ã€‚
MongoDB ã«æ¥ç¶šã™ã‚‹ Node.js ã‚’å‹•ã‹ã™ãŸã‚ã«`backend`ã¨ã„ã†åå‰ã§ã“ã£ã¡ã‚‚è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚
Node.js ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã—ã¦ã‚‚ MongoDB ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãƒãƒ¼ãƒˆã‚’é–‹ã‘ã¦ãŠãã¾ã™ã€‚
æ¥ç¶šæƒ…å ±ã‚’`MONGO_URL`ã¨ã—ã¦ç’°å¢ƒå¤‰æ•°ã§æº–å‚™ã—ã¦ã¾ã™ãŒã€ã“ã“ã§ãƒ™ã‚¿ã‚¬ã‚­ã—ã¡ã‚ƒã£ã¦ã¾ã™ã€‚
ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ãªæ°—ãŒã™ã‚‹ã®ã§ã€æœ¬ç•ªç’°å¢ƒã§ã¯ã„ã„æ„Ÿã˜ã«è¨­å®šå¿…è¦ã§ã™ã€‚

```yml:docker-compose.yml
version: "3.1"
services:
  backend:
    build: ./backend/
    depends_on:
      - mongo
    environment:
      - MONGO_URL=mongodb://testuser:password@mongo:27017/hoge?authSource=admin
    volumes:
      - ./backend:/app
    working_dir: /app
    tty: true
    networks:
      - dev_network
    # command: bash -c "npm install && npm start"
  mongo:
    image: mongo
    restart: always
    networks:
      - dev_network
    ports:
      - 27017:27017
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: password
    volumes:
      - mongo_db_data:/data/db
      - ./mongodb/init.js:/docker-entrypoint-initdb.d/init.js:ro
volumes:
  mongo_db_data:
networks:
  dev_network:
```

`backend`ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ Dockerfile ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã¾ã™ã€‚
`USER`ã®è¨­å®šã—ãªã„ã¨ permission ã®ã‚¨ãƒ©ãƒ¼å‡ºãŸã®ã§ã€èª¿ã¹ãªãŒã‚‰ã‚³ãƒ”ãƒšã—ã¦æ›¸ãã¾ã—ãŸã€‚
çµå±€ã€åŸºæœ¬çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã—ã¦ãŸã®ã§ã€å¾’åŠ´æ°—å‘³ã§ã—ãŸã€‚

```Dockerfile:Dockerfile
FROM node:18-slim

RUN npm i npm@latest -g
RUN mkdir /app && chown node:node /app
WORKDIR /app

USER node
COPY --chown=node:node package.json package-lock.json* ./
RUN npm ci && npm cache clean --force
ENV PATH /app/node_modules/.bin:$PATH
```

MongoDB ã®åˆæœŸè¨­å®šã®ãŸã‚ã«ã€js ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¦ã¾ã™ã€‚
æ¥ç¶šæ™‚ã®æ¨©é™ã‚’çµã‚‹ãŸã‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¦ã¾ã™ã€‚
ã“ã“ã‚‚ã€ç’°å¢ƒå¤‰æ•°ã§èª­ã¿è¾¼ã‚€ç­‰ã®æ°—é…ã‚ŠãŒå¿…è¦ã§ã™ãŒãƒ™ã‚¿ã‚¬ã‚­ã—ã¡ã‚ƒã£ã¦ã¾ã™ã€‚è¦æ³¨æ„ã€‚

```js:mongodb/init.js
db = db.getSiblingDB("admin");
db.auth("root", "password");
db.createUser({
  user: "testuser",
  pwd: "password",
  roles: [
    {
      role: "readWrite",
      db: "hoge",
    },
  ],
});

db = db.getSiblingDB("hoge");
db.createCollection("test");
const doc1 = { name: "Hoge", age: 36 };
const doc2 = { name: "Fuga", age: 32 };
db.test.insertMany([doc1, doc2]);
```

ãƒ­ãƒ¼ã‚«ãƒ«ã¨ã‚³ãƒ³ãƒ†ãƒŠã¨ä¸¡æ–¹ä½¿ã£ã¦ç¢ºèªã—ã¦ãŸã®ã§ã€`node_modules`ãŒè¢«ã‚‰ãªã„ã‚ˆã†ã«ã€`.dockerignore`ã«è¨˜è¼‰ã—ã¾ã—ãŸã€‚

```dockerignore/.dockerignore
node_modules
.git
```

## Node.js

ä¾å­˜ã—ã¦ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è‰²ã€…ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
npm init --yes
npx tsc --init
npm install mongodb
npm install -D ts-node
npm install -D typescript @types/node
npm install -D @shelf/jest-mongodb
npm install -D jest @types/jest ts-jest
```

`package.json`ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚

```json:package.json
{
  "name": "hello-jest-mongodb",
  "version": "1.0.0",
  "description": "",
  "main": "src/index.js",
  "scripts": {
    "start": "npx ts-node src/index.ts",
    "test": "jest"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@shelf/jest-mongodb": "^4.1.3",
    "@types/jest": "^29.2.2",
    "@types/node": "^18.11.9",
    "jest": "^29.2.2",
    "ts-jest": "^29.0.3",
    "ts-node": "^10.9.1",
    "typescript": "^4.8.4"
  },
  "dependencies": {
    "mongodb": "^4.11.0"
  }
}
```

`tsconfig.json`ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ã§ã™ã€‚

```json:tsconfig.json
{
  "compilerOptions": {
    "target": "es2016",                                  /* Set the JavaScript language version for emitted JavaScript and include compatible library declarations. */
    "module": "commonjs",                                /* Specify what module code is generated. */
    "esModuleInterop": true,                             /* Emit additional JavaScript to ease support for importing CommonJS modules. This enables 'allowSyntheticDefaultImports' for type compatibility. */
    "forceConsistentCasingInFileNames": true,            /* Ensure that casing is correct in imports. */
    "strict": true,                                      /* Enable all strict type-checking options. */
    "skipLibCheck": true                                 /* Skip type checking all .d.ts files. */
  }
}
```

## Jest

jest ã®è¨­å®šã¯ã“ã‚“ãªæ„Ÿã˜ã§ã€ã“ã“ã§ã‚„ã£ã¨`@shelf/jest-mongodb`ãŒå‡ºã¦ãã¾ã™ã€‚

```js:jest.config.js
module.exports = {
  preset: "@shelf/jest-mongodb",
  transform: {
    "^.+\\.(ts|tsx)$": "ts-jest",
  },
};
```

`jest-mongodb`ã®è¨­å®šã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚
å®Ÿéš›ã® MongoDB ã®åå‰ã¨åˆã‚ã›ã‚‹ãŸã‚ã€`dbName`ã«`hoge`ã¨å…¥ã‚Œã¦ã¾ã™ãŒã€å¿…è¦ãªã„æ°—ãŒã—ã¦ã¾ã™ã€‚å®Ÿéš›ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã‚‚ãƒ†ã‚¹ãƒˆé€šã‚Šã¾ã—ãŸã€‚ãŸã ã€åˆã‚ã›ãŸæ–¹ãŒæ°—æŒã¡è‰¯ã„ã®ã§ã€è¨­å®šã—ã¦ã¾ã™ã€‚

```js:jest-mongodb-config.js
module.exports = {
  mongodbMemoryServerOptions: {
    binary: {
      version: "4.0.3",
      skipMD5: true,
    },
    autoStart: false,
    instance: {
      dbName: "hoge",
    },
  },
};
```

# ã‚³ãƒ¼ãƒ‰

ã‚³ãƒ¼ãƒ‰ã¯ 3 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†ã‘ã¦æ›¸ã„ã¦ã¾ã™ã€‚
æœ€åˆã¯ã“ã‚“ãªæ„Ÿã˜ã€‚
mongoDB ã¸ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºç«‹ã—ã¦ã€ã‚¯ã‚¨ãƒªã—ã¦ã€ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹æ„Ÿã˜ã§ã™ã€‚ãã“ãã“ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ã„ãŸã¤ã‚‚ã‚Šã§ã™ã€‚

:::message
ã»ã‚“ã¨ã¯ã€æ¥ç¶šã™ã‚‹éƒ¨åˆ†ã‚‚ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã‚„ã‚ŠãŸã‹ã£ãŸã€‚connect éƒ¨åˆ†ãŒéåŒæœŸå‡¦ç†ãªã®ã§ã€async ã¤ã‘ã‚‹å¿…è¦ã‚ã£ãŸã‘ã©ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã¯ã§ããªã„ã¿ãŸã„ã€‚æ®‹å¿µã€‚
:::

```ts:index.ts
import { MongoDB } from "./mongo";
import { TestQuery } from "./testQuery";

const main = async () => {
  const mongoDB = new MongoDB();
  await mongoDB.connect();
  console.log("MongoDB Connected.");
  const collections = mongoDB.getCollections();

  const testQuery = new TestQuery(collections);
  const users = await testQuery.getUsers();
  console.log(users);
  const user = await testQuery.getUserByName("Hoge");
  console.log(user);
  await mongoDB.close();
};

main();
```

ä¸‹è¨˜ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã€TypeScript ã®å‹ã‚’æ´»ç”¨ã™ã‚‹ãŸã‚ã«ã€ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã¾ã¨ã‚ã‚‹å‹ã‚’ä½œã‚Šã¾ã—ãŸã€‚ç¾åœ¨ä¸€ã¤ã—ã‹ãªã„ã®ã§ã€ã‚„ã‚„ã“ã—ãã—ã¦ã‚‹ã ã‘ã§ã™ãŒã€å°†æ¥æ¥½ã«ãªã‚‹ã¯ãšã§ã™ï¼ˆãªã£ã¦ã»ã—ã„ï¼‰ã€‚

[MongoDB + Node.js + TypeScript ãŒå¼·åŠ›ã ã£ãŸ | kohsweblog](https://blog.koh.dev/2019-06-07-mongodb-typescript/)

ã‚ã¨ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã—ã¦ã„ã‚‹ã¨ãã¯ã€ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãªãã¦ã‚‚å‹•ãã‚ˆã†ã«ã—ã¦ã¾ã™ã€‚

`collections`ã¨`client`ã‚’`| undefined`ã«ã—ã¦ã‚‹ã®ãŒæ°—ã«ãªã£ã¦ã¾ã™ã€‚ã‚‚ã†ã¡ã‚‡ã„ã€ã†ã¾ã„ã“ã¨æ›¸ãæ–¹æ³•ãªã„ã‚“ã‚„ã‚ã‹ã€‚

```ts:mongo.ts
import { Collection, MongoClient, ObjectId } from "mongodb";

export type Test = {
  _id?: ObjectId;
  name: string;
  age: number;
};

export type Collections = {
  test: Collection<Test>;
};

export class MongoDB {
  collections: Collections | undefined;
  client: MongoClient | undefined;
  connect = async () => {
    const URL =
      process.env.MONGO_URL ||
      "mongodb://testuser:password@127.0.0.1:27017/hoge?authSource=admin";
    this.client = await MongoClient.connect(URL);
    const db = this.client.db("hoge");
    // this.collections!.test =
    const test = db.collection<Test>("test");
    this.collections = { test: test };
  };
  getCollections = () => {
    return this.collections!;
  };
  close = async () => {
    await this.client?.close();
  };
}
```

æœ€å¾Œã«ã€MongoDB ã¸ã®ã‚¯ã‚¨ãƒªéƒ¨åˆ†ã§ã™ã€‚ã‚ˆã†ã‚„ãã§ã™ã€‚
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã€ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚‚ã‚‰ã†æ„Ÿã˜ã«ã—ã¦ DI çš„ãªã“ã¨ã‚’ã‚„ã£ã¦ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆæ™‚ã« MongoDB ã‚’ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã®ã‚‚ã®ã«ç°¡å˜ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚

```ts:testQuery.ts
import { Collections, Test } from "./mongo";

export class TestQuery {
  collections: Collections;
  constructor(collections: Collections) {
    this.collections = collections;
  }
  getUsers = async () => {
    const result = (await this.collections.test.find().toArray()) as Test[];
    return result;
  };
  getUserByName = async (name: string) => {
    const result = await this.collections.test.findOne(
      { name: name },
      { projection: { _id: 0 } }
    );
    return result as Test;
  };
}
```

å‹•ã‹ã™ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚

```bash
$ npm start

> hello-jest-mongodb@1.0.0 start
> npx ts-node src/index.ts

MongoDB Connected.
[
  {
    _id: new ObjectId("63652a85ca98ee33ec63e882"),
    name: 'Hoge',
    age: 36
  },
  {
    _id: new ObjectId("63652a85ca98ee33ec63e883"),
    name: 'Fuga',
    age: 32
  }
]
{ name: 'Hoge', age: 36 }
```

# ãƒ†ã‚¹ãƒˆ

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚
`beforeAll`ã«æ›¸ã‹ã‚Œã¦ã‚‹æ¥ç¶šéƒ¨åˆ†ãŒã€ã‚·ãƒ³ãƒ—ãƒ«ãªã®ã§ã€ã¨ã£ã¤ãã‚„ã™ã„æ°—ãŒã—ã¦ã¾ã™ã€‚

:::message
è¬ã® any ã‚­ãƒ£ã‚¹ãƒˆãŒã‚ã‚Šã¾ã™ãŒãƒ»ãƒ»ãƒ»
:::

`TestQuery()`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§å‹•ã MongoDB ä¸Šã«ä½œã£ãŸã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ã¦ã‚ã’ã‚‹ã“ã¨ã§ã€ã„ã„æ„Ÿã˜ã«ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¾ã™ã€‚

è¤‡æ•°ã®ãƒ†ã‚¹ãƒˆé …ç›®ãŒã‚ã‚‹ã¨ãã¯ã€ã©ã“ã§ãƒ‡ãƒ¼ã‚¿å…¥ã‚Œã‚‹ã‹ç­‰ã‚’ã‚‚ã†ã¡ã‚‡ã„ã‚±ã‚¢ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚

```ts:testQuery.test.ts
import { Collections, Test } from "./mongo";
import { TestQuery } from "./testQuery";

import { MongoClient, Db } from "mongodb";

describe("è©¦ã—ã«ãƒ†ã‚¹ãƒˆ", () => {
  let connection: MongoClient;
  let db: Db;
  let collections: Collections;

  beforeAll(async () => {
    console.log("beforeAll");

    connection = await MongoClient.connect((global as any).__MONGO_URI__);
    db = connection.db();
    db.createCollection("test");
    collections = { test: db.collection<Test>("test") };
  });

  beforeEach(async () => {
    console.log("beforeEach");
    const test = db.collection("test");

    const doc1 = { name: "ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã»ã’", age: 36 };
    const doc2 = { name: "ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãµãŒ", age: 32 };
    test.insertMany([doc1, doc2]);
  });

  afterAll(async () => {
    console.log("afterAll");
    await connection.close();
  });

  test("æŒ‡å®šã—ãŸusernameã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå–å¾—ã§ãã‚‹", async () => {
    console.log("test start");

    const testQuery = new TestQuery(collections);

    const result = await testQuery.getUserByName("ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã»ã’");
    console.log(result);

    expect(result).toStrictEqual({ name: "ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã»ã’", age: 36 });
  });
});
```

ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã“ã‚“ãªæ„Ÿã˜ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ã„ã„æ„Ÿã˜ã€‚

```bash
$ npm test

> hello-jest-mongodb@1.0.0 test
> jest

  console.log
    beforeAll

      at src/testQuery.test.ts:12:13

  console.log
    beforeEach

      at src/testQuery.test.ts:21:13

  console.log
    test start

      at src/testQuery.test.ts:35:13

  console.log
    { name: 'ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã»ã’', age: 36 }

      at src/testQuery.test.ts:40:13

  console.log
    afterAll

      at src/testQuery.test.ts:30:13

 PASS  src/testQuery.test.ts
  è©¦ã—ã«ãƒ†ã‚¹ãƒˆ
    âœ“ æŒ‡å®šã—ãŸusernameã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå–å¾—ã§ãã‚‹ (22 ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.826 s, estimated 2 s
Ran all test suites.
```

# ãŠã‚ã‚Šã«

ã„ã„æ„Ÿã˜ã«ã€ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§ã‚µã‚¯ãƒƒã¨å‹•ä½œç¢ºèªã§ããŸã®ã§æº€è¶³ã§ã™ã€‚
ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã—ãŸã„ã®ã§ã€ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã§ã‚µã‚¯ãƒƒã¨å‹•ã MongoDB ã‚’ä½¿ã£ã¦ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§ãã‚‹ã®ã¯ã‹ãªã‚Šè‰¯ã•ã’ã§ã—ãŸã€‚
MongoDB ä½¿ã£ã¦ã‚‹æ™‚ç‚¹ã§ã€ãã‚“ãªé›£ã—ã„ã‚¯ã‚¨ãƒªãŒå¿…è¦ãªã„æ°—ã‚‚ã™ã‚‹ã‹ã‚‰ã€æœ¬å½“ã« DB æ¥ç¶šã—ãŸãƒ†ã‚¹ãƒˆã£ã¦å¿…è¦ãªã®ã‹ã£ã¦ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€‚
æ›¸ãæ–¹ã¯ã€ã‚‚ã†ã¡ã‚‡ã„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã‹ã‚‚ã§ã™ãŒã€æ´»ç”¨ã—ã¦ã„ããŸã„ã§ã™ã€‚

ä»Šå›è§¦ã‚Œã¦ã¾ã›ã‚“ãŒã€ä¸‹è¨˜ã‚µã‚¤ãƒˆã‚’è¦‹ã‚‹ã¨ã€ã‚‚ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã«[nodkz/mongodb-memory-server](https://github.com/nodkz/mongodb-memory-server)ã‚’ä½¿ã£ã¦ã€ãƒ†ã‚¹ãƒˆã—ã¦ã‚‹ã®ã§ã€ãã£ã¡ã®æ–¹ãŒä¾å­˜å…ˆæ¸›ã‚‰ã›ã¦è‰¯ã„ã®ã‹ã‚‚ã§ã™ã€‚ã„ã¤ã‹è©¦ã—ã¦ã¿ãŸã„ã§ã™ã€‚
[MongoDB + Jest ã®ãƒ†ã‚¹ãƒˆæ–¹æ³• | kohsweblog](https://blog.koh.dev/2019-06-11-mongodb-jest/)

# å‚è€ƒ

## jest-mongodb

[Using with MongoDB Â· Jest](https://jestjs.io/docs/mongodb)
[shelfio/jest-mongodb: Jest preset for MongoDB in-memory server](https://github.com/shelfio/jest-mongodb)
[MongoDB + Jest ã®ãƒ†ã‚¹ãƒˆæ–¹æ³• | kohsweblog](https://blog.koh.dev/2019-06-11-mongodb-jest/)
[Express + MongoDB ã§ä½œæˆã—ãŸ API ã‚µãƒ¼ãƒãƒ¼ã‚’ Jest ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ - Qiita](https://qiita.com/azukiazusa/items/b0365c95e6509ec57f7a#jest-mongodb-configjs)

## Jest

[TypeScript ã®ãƒ†ã‚¹ãƒˆã‚’ Jest (ts-jest) ã§ã‚„ã£ã¦ã¿ã‚‹ - Qiita](https://qiita.com/mangano-ito/items/99dedf88d972e7e631b7)
[kulshekhar/ts-jest: A Jest transformer with source map support that lets you use Jest to test projects written in TypeScript.](https://github.com/kulshekhar/ts-jest)

## MongoDB

[ã¯ã˜ã‚ã¦ã® MongoDB with Docker](https://zenn.dev/optimisuke/articles/d6b248d45f4f5c)
[Node.js ã‹ã‚‰ MongoDB ã«æ¥ç¶šã—ã¦ã¿ã‚‹ - Qiita](https://qiita.com/one-kelvin/items/c0c036f774f0b3b98ae5)
