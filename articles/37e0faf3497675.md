---
title: "Gradioã§Imageã‚’ä½¿ã†ã¨ãã®3ã¤ã®type"
emoji: "ğŸ¤—"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [gradio, huggingface, python]
published: true
---

# ã¯ã˜ã‚ã«

Gradio ã§ Image ã‚’ä½¿ã†ã¨ãã€`numpy.array, PIL.Image or str filepath`ã® 3 ã‚¿ã‚¤ãƒ—ãŒã‚ã‚Šã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯`numpy.array`ï¼‰ã€‚
ãã‚Œãã‚Œã€ä½¿ã„æ‰€ãŒã‚ã‚Šãã†ãªã®ã§å¿…è¦ã«å¿œã˜ã¦ã‚¿ã‚¤ãƒ—ã‚’é¸ã¶å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚
ã¾ãŸã€ã‚¿ã‚¤ãƒ—ã«ã‚ˆã£ã¦ç”»åƒã®æ‰±ã„æ–¹ãŒé•ã†ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
ã“ã“ã§ã¯ã€ç”»åƒã‚’ã‚µãƒ¼ãƒãƒ¼å´ã§ä¿å­˜ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’è¸ã¾ãˆã¦èª¬æ˜ã—ã¾ã™ã€‚

https://www.gradio.app/docs/image

# ã‚³ãƒ¼ãƒ‰ã¨ç”»é¢

Gradio ã®ã‚·ãƒ³ãƒ—ãƒ«ãªç”»é¢ã‚’ä½œã£ã¦ã€3 ã¤ã®ã‚¿ã‚¤ãƒ—ã§ãã‚Œãã‚Œä¿å­˜ã—ã¦ã„ã¾ã™ã€‚
`filepath`ã‚’æŒ‡å®šã™ã‚‹ã¨ä¸€æ™‚çš„ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æ–‡å­—åˆ—ã¨ã—ã¦å–å¾—ã§ãã¾ã™ã€‚

```python:main.py
import os
import shutil
import numpy as np
import gradio as gr
from PIL import Image

def save_image_pil(image: Image):
    # ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¿å­˜
    image.save("image.jpeg")
    pass

def save_image_numpy(image_array: np.array):
    # numpyé…åˆ—ã‹ã‚‰Pillowã‚¤ãƒ¡ãƒ¼ã‚¸ã«å¤‰æ›
    image = Image.fromarray(np.uint8(image_array)).convert('RGB')
    # ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¿å­˜
    image.save("pil.jpeg")
    pass

def save_image_filepath(filepath: str):
    print(filepath)
    # ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¿å­˜
    _, file_extension = os.path.splitext(filepath)
    shutil.copy(filepath, './filepath{}'.format(file_extension))
    pass

with gr.Blocks() as demo:
    gr.Markdown("Image types.")
    with gr.Row():
        # pil: pillowã®Imageã‚¯ãƒ©ã‚¹ã¨ã—ã¦å…¥åŠ›ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯nupyã€‚
        with gr.Column():
            image_input_pil = gr.Image(type='pil')
            image_button_pil = gr.Button("pil")
        with gr.Column():
            image_input_numpy = gr.Image(type='numpy')
            image_button_numpy = gr.Button("numpy")
        with gr.Column():
            image_input_filepath = gr.Image(type='filepath')
            image_button_filepath = gr.Button("filepath")

    image_button_pil.click(save_image_pil, inputs=image_input_pil)
    image_button_numpy.click(save_image_numpy, inputs=image_input_numpy)
    image_button_filepath.click(save_image_filepath, inputs=image_input_filepath)

demo.launch()
```

å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
pip install gradio pillow
python main.py
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚3 ç¨®é¡ã®æ–¹æ³•ã§ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ãŸã€‚
ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãã‚Œãã‚Œã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‰

![](/images/2023-12-16-22-15-22.png)

### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œ

![](/images/2023-12-16-22-15-34.png)

çŸ­ã„ã§ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã‚’ã¿ã‚‹ã¨ã€ãã‚Œãã‚Œã®ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸå‡¦ç†ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ç”»åƒï¼ˆImageï¼‰ã ã‘ã«ã€‚

# ãŠã‚ã‚Šã«

æ›¸ã„ã¦ã¿ã‚‹ã¨ã€ã‚‚ã®ã™ã”ãã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€ã‚ã¾ã‚Šæƒ…å ±è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€åŒã˜ã‚ˆã†ãªäººã®ãŸã‚ã«ãªã‚Œã°ã¨æ€ã„ã¾ã™ã€‚
Gradio è‰²ã€…ã§ãã¦ä¾¿åˆ©ãã†ãªã®ã§ã€ã‚‚ã£ã¨ç†è§£ã—ã¦è‰²ã€…è©¦ã—ãŸã„ãªã¨æ€ã„ã¾ã™ã€‚
